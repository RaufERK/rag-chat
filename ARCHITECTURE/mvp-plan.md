# üìÑ –ü–ª–∞–Ω MVP: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ RAG Chat

## üéØ –¶–µ–ª—å MVP

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–∏—Å—Ç–µ–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å PDF —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ RAG —á–∞—Ç–µ

## ü§î –í–æ–ø—Ä–æ—Å: –ù—É–∂–Ω–æ –ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –•—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è MVP)
**–ü–ª—é—Å—ã:**
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ó–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
- ‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã
**–ü–ª—é—Å—ã:**
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- ‚ùå –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è MVP:** –•—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤.

## üìã –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP

### –≠—Ç–∞–ø 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1-2 –¥–Ω—è)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - [ ] `next-auth@beta` (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
  - [ ] `pdf-parse` (PDF –ø–∞—Ä—Å–∏–Ω–≥)
  - [ ] `multer` (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)
  - [ ] `sqlite3` (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
  - [ ] `crypto` (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NextAuth.js
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ SQLite —Å—Ö–µ–º—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–ø–∫–∏ uploads/

### –≠—Ç–∞–ø 2: –ê–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (2-3 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ `/admin` —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- [ ] Drag & Drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –≠—Ç–∞–ø 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ (2-3 –¥–Ω—è)
- [ ] API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (`/api/upload`)
- [ ] PDF –ø–∞—Ä—Å–∏–Ω–≥ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- [ ] –†–∞–∑–±–∏–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Qdrant
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RAG (1-2 –¥–Ω—è)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –≤ Qdrant
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (1-2 –¥–Ω—è)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö PDF
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- [ ] –û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ MVP

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # –ì–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upload/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ files/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...nextauth]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts      # NextAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upload/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # API –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ files/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts          # API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                   # NextAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.ts               # SQLite –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ file-processor.ts         # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ text-splitter.ts          # –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ file-storage.ts           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ file-types.ts             # –¢–∏–ø—ã –¥–ª—è —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ uploads/                      # –ü–∞–ø–∫–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤
    ‚îú‚îÄ‚îÄ 2024/
    ‚îÇ   ‚îî‚îÄ‚îÄ 01/
    ‚îî‚îÄ‚îÄ temp/
```

## üóÑÔ∏è SQLite —Å—Ö–µ–º–∞

```sql
-- –¢–∞–±–ª–∏—Ü–∞ —Ñ–∞–π–ª–æ–≤
CREATE TABLE files (
  id TEXT PRIMARY KEY,                    -- UUID —Ñ–∞–π–ª–∞
  filename TEXT NOT NULL,                 -- –ò–º—è —Ñ–∞–π–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ
  original_name TEXT NOT NULL,            -- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è
  file_hash TEXT UNIQUE NOT NULL,         -- MD5 —Ö–µ—à —Ñ–∞–π–ª–∞
  file_size INTEGER NOT NULL,             -- –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
  mime_type TEXT NOT NULL,                -- MIME —Ç–∏–ø
  upload_date DATETIME DEFAULT CURRENT_TIMESTAMP,
  status TEXT DEFAULT 'processing',       -- processing, completed, error
  chunks_count INTEGER DEFAULT 0,         -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤
  qdrant_points TEXT,                     -- JSON –º–∞—Å—Å–∏–≤ ID —Ç–æ—á–µ–∫ –≤ Qdrant
  metadata TEXT,                          -- JSON —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  error_message TEXT                      -- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
);

-- –õ–æ–≥ –∑–∞–≥—Ä—É–∑–æ–∫
CREATE TABLE uploads_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  file_id TEXT,
  action TEXT,                            -- upload, process, error, delete
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
  details TEXT                            -- JSON —Å –¥–µ—Ç–∞–ª—è–º–∏
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_files_hash ON files(file_hash);
CREATE INDEX idx_files_status ON files(status);
CREATE INDEX idx_files_upload_date ON files(upload_date);
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞

```
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
   ‚Üì
2. –í–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–∞–∑–º–µ—Ä, —Ç–∏–ø, —Ñ–æ—Ä–º–∞—Ç)
   ‚Üì
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö–µ—à–∞
   ‚Üì
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   ‚Üì
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ –¥–∏—Å–∫
   ‚Üì
6. –ó–∞–ø–∏—Å—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ SQLite
   ‚Üì
7. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF
   ‚Üì
8. –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏
   ‚Üì
9. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
   ‚Üì
10. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Qdrant
    ‚Üì
11. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ SQLite
    ‚Üì
12. –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ RAG
```

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å PDF —Ñ–∞–π–ª
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –∏ —Å–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- [ ] –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Qdrant
- [ ] RAG —á–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- [ ] –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ SQLite
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### UI/UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ MVP

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤:** DOCX, TXT, EPUB
2. **–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:** Vercel Blob, Supabase
3. **–£–ª—É—á—à–µ–Ω–∏—è UI:** Drag & Drop, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:** PostgreSQL, Redis 