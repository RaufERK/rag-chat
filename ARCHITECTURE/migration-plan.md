# üß≠ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ RAG Chat

–¶–µ–ª—å: –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –Ω–∞ LangChain, –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.

---

## üîπ –≠—Ç–∞–ø 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LangChain.js (—è–¥—Ä–æ)

‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ–º:

- –ü–æ–¥–∫–ª—é—á–∞–µ–º LangChain.js (`RetrievalQAChain`)
- –°–æ–∑–¥–∞—ë–º `rag-engine.ts` –∏–ª–∏ `langchain/rag-chain.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π PromptTemplate (`spiritualPrompt`)
- –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º chain –≤ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–≥–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å

üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –£–±–∏—Ä–∞–µ–º —Å–∞–º–æ–ø–∏—Å–Ω—É—é –ª–æ–≥–∏–∫—É
- –í—Å–µ RAG-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ LangChain

---

## üîπ –≠—Ç–∞–ø 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ ‚Äî —Ö–µ—à–∏ + –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ–º:

- –í–Ω–µ–¥—Ä—è–µ–º `DocumentProcessorFactory`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º: PDF, TXT, DOCX, FB2, EPUB, DOC
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏: —É–¥–∞–ª—è–µ–º —Ñ–∞–π–ª, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ hash, chunks, –º–µ—Ç–∞

üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ingestion
- –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ì–æ—Ç–æ–≤–æ –¥–ª—è LangChain Loaders

---

## üîπ –≠—Ç–∞–ø 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ–º:

- –¢–∞–±–ª–∏—Ü–∞ `system_settings` (–∏–ª–∏ `rag_settings`)
- –°–æ–∑–¥–∞—ë–º `configService.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤: LLM, retriever, prompts, pipeline

üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, k, –º–æ–¥–µ–ª—å, —è–∑—ã–∫ –∏ –ø—Ä. ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –±–µ–∑ redeploy

---

## üîπ –≠—Ç–∞–ø 4: –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ–º:

- –†–æ–ª–∏: Admin / Editor (User ‚Äî –ø–æ–∑–∂–µ)
- Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- UI-—Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –∑–∞–≥—Ä—É–∑–∫–∞ / –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ / –ø—Ä–æ—Å–º–æ—Ç—Ä

üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤, –Ω–µ –æ–ø–∞—Å–∞—è—Å—å –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

---

## üîπ –≠—Ç–∞–ø 5: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ–º:

- UI –¥–ª—è `system_settings`: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å–ª–∞–π–¥–µ—Ä—ã, —Å–µ–ª–µ–∫—Ç—ã
- –î–∞—à–±–æ—Ä–¥ —Ñ–∞–π–ª–æ–≤: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å, –æ—à–∏–±–∫–∏
- API `/admin/settings`, `/admin/files/stats`

üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –ì–∏–±–∫–æ—Å—Ç—å –±–µ–∑ –∫–æ–¥–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

## ‚úÖ –ò—Ç–æ–≥–æ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–¥–µ–ª–∫–∏, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

| –≠—Ç–∞–ø              | –ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç                 | –ù–∞–¥ —á–µ–º –∑–∞–≤–∏—Å–∏—Ç |
| --------------------- | ----------------------------------------- | ---------------------------- |
| 1. LangChain —è–¥—Ä–æ | –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ                 | ‚Äî                           |
| 2. File-processor     | depends on LangChain load format          | LangChain                    |
| 3. ConfigService      | –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ chain             | –≠—Ç–∞–ø 1                   |
| 4. Roles              | –∫—Ç–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–º          | –≠—Ç–∞–ø—ã 1‚Äì3              |
| 5. Admin UI           | –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ | –≠—Ç–∞–ø—ã 3‚Äì4              |

---

üìÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
**LangChain ‚Üí –§–∞–π–ª—ã ‚Üí –ö–æ–Ω—Ñ–∏–≥–∏ ‚Üí –†–æ–ª–∏ ‚Üí UI**
